<div class="news-container">
  
  <h1>Ãšltimas Noticias</h1>
  
  <div *ngIf="isLoading" class="spinner-container">
    <div class="spinner"></div>
    <p>Cargando noticias...</p>
  </div>

  <div *ngIf="!isLoading">
    
    <div *ngIf="newsList.length > 0">
      <article class="news-item" *ngFor="let news of newsList">
        
        <h2>{{ news.title }}</h2>
        <p class="publication-date">
          Publicado: {{ news.publicationDate | date:'d MMMM, yyyy' }}
        </p>
        
        <div class="carousel-wrapper" *ngIf="getImages(news).length > 0 || getVideos(news).length > 0">

          <div #carouselEl class="carousel-container">
            
            <div class="carousel-item" *ngFor="let imgUrl of getImages(news)">
              <img 
                [src]="imgUrl" 
                [alt]="news.title" 
                (error)="handleMediaError($event)">
            </div>
            
            <div class="carousel-item" *ngFor="let vidUrl of getVideos(news)">
              <div class="video-wrapper" *ngIf="isYoutube(vidUrl)">
                <iframe 
                  [src]="getYoutubeEmbedUrl(vidUrl)" 
                  frameborder="0" 
                  allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                  allowfullscreen>
                </iframe>
              </div>
              <div *ngIf="!isYoutube(vidUrl)">
                <video 
                  [src]="vidUrl" 
                  controls 
                  preload="metadata" 
                  (error)="handleMediaError($event)">
                  Tu navegador no soporta videos.
                </video>
              </div>
            </div>
          </div>
          <button class="carousel-btn prev" (click)="scrollLeft(carouselEl)">&#x2039;</button>
          <button class="carousel-btn next" (click)="scrollRight(carouselEl)">&#x203A;</button>

        </div>
        
        <p class="news-text">{{ news.textNews }}</p>
        
      </article>
    </div>
    
    <div *ngIf="newsList.length === 0" class="empty-state">
      <p>No hay noticias para mostrar en este momento.</p>
    </div>

  </div>
  
</div>